{"ast":null,"code":"var _jsxFileName = \"/home/ethanh/Desktop/socket-squares-project/v1/src/components/Account.js\",\n    _s = $RefreshSig$();\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCoins } from '@fortawesome/free-solid-svg-icons';\nimport useAuth from '../hooks/useAuth';\nimport { useEffect, useState, useRef } from 'react';\nimport useAxiosPrivate from '../hooks/useAxiosPrivate';\nimport \"./css/Account.css\";\nimport axios from '../api/axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Account = () => {\n  _s();\n\n  var _imageRef$current;\n\n  const {\n    auth\n  } = useAuth();\n  const axiosPrivate = useAxiosPrivate();\n  const [image, setImage] = useState({});\n  const [imageUrl, setImageUrl] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  const [errMsg, setErrMsg] = useState();\n  const imageRef = useRef();\n\n  const upload = async e => {\n    if (!imageRef.current.files[0]) return console.log(\"NO\");\n    e.preventDefault();\n    console.log(imageRef.current.files[0]);\n    setIsLoading(true);\n    const response = await axiosPrivate.get('/api/s3/geturl');\n    const url = response.data.url;\n    const file = imageRef.current.files[0]; //add to aws\n\n    try {\n      await axios.put(url, file, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n    } catch (err) {\n      console.error(err);\n      return;\n    } //send back new url to server\n\n\n    const updateResponse = await axiosPrivate.post(\"/api/s3/updateurl\", {\n      data: {\n        url: url.split('?')[0]\n      }\n    });\n    console.log(response);\n    setIsLoading(false);\n  };\n\n  const onImageChange = e => {\n    setImage(e.target.files[0]);\n  };\n\n  useEffect(() => {\n    if (!image.name) return;\n    setImageUrl(URL.createObjectURL(image));\n  }, [image]);\n  return isLoading ? /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 11\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"user-data\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: auth.user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faCoins\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 20\n        }, this), auth.coins]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: errMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: upload,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"imageInput\",\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: onImageChange,\n        ref: imageRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imageUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: !(imageRef !== null && imageRef !== void 0 && (_imageRef$current = imageRef.current) !== null && _imageRef$current !== void 0 && _imageRef$current.files[0]),\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Account, \"o4Jc3KVNGptlQGRH/S0GG3Drqoo=\", false, function () {\n  return [useAuth, useAxiosPrivate];\n});\n\n_c = Account;\nexport default Account;\n\nvar _c;\n\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["FontAwesomeIcon","faCoins","useAuth","useEffect","useState","useRef","useAxiosPrivate","axios","Account","auth","axiosPrivate","image","setImage","imageUrl","setImageUrl","isLoading","setIsLoading","errMsg","setErrMsg","imageRef","upload","e","current","files","console","log","preventDefault","response","get","url","data","file","put","headers","err","error","updateResponse","post","split","onImageChange","target","name","URL","createObjectURL","user","coins"],"sources":["/home/ethanh/Desktop/socket-squares-project/v1/src/components/Account.js"],"sourcesContent":["import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCoins } from '@fortawesome/free-solid-svg-icons';\nimport useAuth from '../hooks/useAuth'\nimport { useEffect, useState, useRef } from 'react';\nimport useAxiosPrivate from '../hooks/useAxiosPrivate';\n\nimport \"./css/Account.css\" \nimport axios from '../api/axios';\n\nconst Account = () => {\n    const {auth} = useAuth();\n    const axiosPrivate = useAxiosPrivate();\n    const [image, setImage] = useState({});\n    const [imageUrl, setImageUrl] = useState();\n    const [isLoading, setIsLoading] = useState(false);\n    const [errMsg, setErrMsg] = useState();\n    const imageRef = useRef();\n\n    const upload = async(e)=>{\n        \n        if(!imageRef.current.files[0]) return console.log(\"NO\");\n        \n        e.preventDefault();\n        console.log(imageRef.current.files[0])\n        setIsLoading(true)\n        const response = await axiosPrivate.get('/api/s3/geturl');\n        const url = response.data.url;\n        const file = imageRef.current.files[0];\n\n        //add to aws\n        try{\n           await axios.put(url,file,{\n                headers: {\n                    \"Content-Type\": \"multipart/form-data\"\n                },   \n            })\n        } catch (err){\n            console.error(err);\n            return;\n        }\n\n        //send back new url to server\n        const updateResponse = await axiosPrivate.post(\"/api/s3/updateurl\",\n            {\n                data:{\n                    url: url.split('?')[0]\n                }\n            }\n        )\n\n        console.log(response);\n        setIsLoading(false);\n        \n    }\n\n    const onImageChange = (e) =>{\n        setImage(e.target.files[0]);\n    }\n\n    useEffect(() =>{\n        if(!image.name) return;\n        setImageUrl(URL.createObjectURL(image));\n    },[image])\n\n    return (        \n        isLoading\n        ? <h2>Loading...</h2>\n        :\n        <div id=\"profile\">\n            <div id=\"user-data\">\n                <h1>{auth.user}</h1>\n                <br />\n                <p><FontAwesomeIcon icon={faCoins}/>{auth.coins}</p>\n            </div>\n            <h2>{errMsg}</h2>\n            <form onSubmit={upload}>\n                <input id='imageInput' type=\"file\" accept=\"image/*\" onChange={onImageChange} ref={imageRef}/>\n                <img src={imageUrl}/>\n                <button type=\"submit\" disabled={!imageRef?.current?.files[0]}>Upload</button>\n            </form>\n        </div>\n        \n    )\n}\n\nexport default Account"],"mappings":";;;AAAA,SAASA,eAAT,QAAgC,gCAAhC;AACA,SAASC,OAAT,QAAwB,mCAAxB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,QAA4C,OAA5C;AACA,OAAOC,eAAP,MAA4B,0BAA5B;AAEA,OAAO,mBAAP;AACA,OAAOC,KAAP,MAAkB,cAAlB;;;AAEA,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAAA;;EAClB,MAAM;IAACC;EAAD,IAASP,OAAO,EAAtB;EACA,MAAMQ,YAAY,GAAGJ,eAAe,EAApC;EACA,MAAM,CAACK,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,EAAxC;EACA,MAAM,CAACW,SAAD,EAAYC,YAAZ,IAA4BZ,QAAQ,CAAC,KAAD,CAA1C;EACA,MAAM,CAACa,MAAD,EAASC,SAAT,IAAsBd,QAAQ,EAApC;EACA,MAAMe,QAAQ,GAAGd,MAAM,EAAvB;;EAEA,MAAMe,MAAM,GAAG,MAAMC,CAAN,IAAU;IAErB,IAAG,CAACF,QAAQ,CAACG,OAAT,CAAiBC,KAAjB,CAAuB,CAAvB,CAAJ,EAA+B,OAAOC,OAAO,CAACC,GAAR,CAAY,IAAZ,CAAP;IAE/BJ,CAAC,CAACK,cAAF;IACAF,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACG,OAAT,CAAiBC,KAAjB,CAAuB,CAAvB,CAAZ;IACAP,YAAY,CAAC,IAAD,CAAZ;IACA,MAAMW,QAAQ,GAAG,MAAMjB,YAAY,CAACkB,GAAb,CAAiB,gBAAjB,CAAvB;IACA,MAAMC,GAAG,GAAGF,QAAQ,CAACG,IAAT,CAAcD,GAA1B;IACA,MAAME,IAAI,GAAGZ,QAAQ,CAACG,OAAT,CAAiBC,KAAjB,CAAuB,CAAvB,CAAb,CATqB,CAWrB;;IACA,IAAG;MACA,MAAMhB,KAAK,CAACyB,GAAN,CAAUH,GAAV,EAAcE,IAAd,EAAmB;QACpBE,OAAO,EAAE;UACL,gBAAgB;QADX;MADW,CAAnB,CAAN;IAKF,CAND,CAME,OAAOC,GAAP,EAAW;MACTV,OAAO,CAACW,KAAR,CAAcD,GAAd;MACA;IACH,CArBoB,CAuBrB;;;IACA,MAAME,cAAc,GAAG,MAAM1B,YAAY,CAAC2B,IAAb,CAAkB,mBAAlB,EACzB;MACIP,IAAI,EAAC;QACDD,GAAG,EAAEA,GAAG,CAACS,KAAJ,CAAU,GAAV,EAAe,CAAf;MADJ;IADT,CADyB,CAA7B;IAQAd,OAAO,CAACC,GAAR,CAAYE,QAAZ;IACAX,YAAY,CAAC,KAAD,CAAZ;EAEH,CAnCD;;EAqCA,MAAMuB,aAAa,GAAIlB,CAAD,IAAM;IACxBT,QAAQ,CAACS,CAAC,CAACmB,MAAF,CAASjB,KAAT,CAAe,CAAf,CAAD,CAAR;EACH,CAFD;;EAIApB,SAAS,CAAC,MAAK;IACX,IAAG,CAACQ,KAAK,CAAC8B,IAAV,EAAgB;IAChB3B,WAAW,CAAC4B,GAAG,CAACC,eAAJ,CAAoBhC,KAApB,CAAD,CAAX;EACH,CAHQ,EAGP,CAACA,KAAD,CAHO,CAAT;EAKA,OACII,SAAS,gBACP;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QADO,gBAGT;IAAK,EAAE,EAAC,SAAR;IAAA,wBACI;MAAK,EAAE,EAAC,WAAR;MAAA,wBACI;QAAA,UAAKN,IAAI,CAACmC;MAAV;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAA;QAAA;QAAA;MAAA,QAFJ,eAGI;QAAA,wBAAG,QAAC,eAAD;UAAiB,IAAI,EAAE3C;QAAvB;UAAA;UAAA;UAAA;QAAA,QAAH,EAAqCQ,IAAI,CAACoC,KAA1C;MAAA;QAAA;QAAA;QAAA;MAAA,QAHJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ,eAMI;MAAA,UAAK5B;IAAL;MAAA;MAAA;MAAA;IAAA,QANJ,eAOI;MAAM,QAAQ,EAAEG,MAAhB;MAAA,wBACI;QAAO,EAAE,EAAC,YAAV;QAAuB,IAAI,EAAC,MAA5B;QAAmC,MAAM,EAAC,SAA1C;QAAoD,QAAQ,EAAEmB,aAA9D;QAA6E,GAAG,EAAEpB;MAAlF;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAK,GAAG,EAAEN;MAAV;QAAA;QAAA;QAAA;MAAA,QAFJ,eAGI;QAAQ,IAAI,EAAC,QAAb;QAAsB,QAAQ,EAAE,EAACM,QAAD,aAACA,QAAD,oCAACA,QAAQ,CAAEG,OAAX,8CAAC,kBAAmBC,KAAnB,CAAyB,CAAzB,CAAD,CAAhC;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAHJ;IAAA;MAAA;MAAA;MAAA;IAAA,QAPJ;EAAA;IAAA;IAAA;IAAA;EAAA,QAJJ;AAmBH,CA1ED;;GAAMf,O;UACaN,O,EACMI,e;;;KAFnBE,O;AA4EN,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}