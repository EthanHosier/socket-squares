{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"../api/axios\";\nimport useAuth from \"./useAuth\";\n\nconst useRefreshToken = () => {\n  _s();\n\n  const {\n    setAuth\n  } = useAuth(); //uses refresh function to request new access token\n\n  const refresh = async () => {\n    console.log(\"refresh\");\n    const response = await axios.get('/api/refresh', {\n      withCredentials: true //allows cookies to be sent w/ request (response token)\n\n    });\n    setAuth(prev => {\n      console.log(JSON.stringify(prev));\n      console.log(response.data.accessToken);\n      return { ...prev,\n        user: response.data.user,\n        coins: response.data.coins,\n        accessToken: response.data.accessToken\n      };\n    });\n    return response.data.accessToken;\n  };\n\n  return refresh;\n};\n\n_s(useRefreshToken, \"kM+3qTo8R5QL0/6u1eNqRnijxN4=\", false, function () {\n  return [useAuth];\n});\n\nexport default useRefreshToken;","map":{"version":3,"names":["axios","useAuth","useRefreshToken","setAuth","refresh","console","log","response","get","withCredentials","prev","JSON","stringify","data","accessToken","user","coins"],"sources":["/home/ethanh/Desktop/socket-squares-project/v1/src/hooks/useRefreshToken.js"],"sourcesContent":["import axios from \"../api/axios\"\nimport useAuth from \"./useAuth\"\n\nconst useRefreshToken = () => {\n    const {setAuth} = useAuth();\n\n    //uses refresh function to request new access token\n    const refresh = async() => {\n        console.log(\"refresh\")\n        const response = await axios.get('/api/refresh',{\n            withCredentials:true, //allows cookies to be sent w/ request (response token)\n        });\n        setAuth(prev =>{\n            console.log(JSON.stringify(prev));\n            console.log(response.data.accessToken);\n            return{...prev,\n                user:response.data.user,\n                coins: response.data.coins, \n                accessToken: response.data.accessToken}\n        })\n        return response.data.accessToken\n    }   \n\n    return refresh;\n};\n\nexport default useRefreshToken;"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,cAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,eAAe,GAAG,MAAM;EAAA;;EAC1B,MAAM;IAACC;EAAD,IAAYF,OAAO,EAAzB,CAD0B,CAG1B;;EACA,MAAMG,OAAO,GAAG,YAAW;IACvBC,OAAO,CAACC,GAAR,CAAY,SAAZ;IACA,MAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAN,CAAU,cAAV,EAAyB;MAC5CC,eAAe,EAAC,IAD4B,CACtB;;IADsB,CAAzB,CAAvB;IAGAN,OAAO,CAACO,IAAI,IAAG;MACXL,OAAO,CAACC,GAAR,CAAYK,IAAI,CAACC,SAAL,CAAeF,IAAf,CAAZ;MACAL,OAAO,CAACC,GAAR,CAAYC,QAAQ,CAACM,IAAT,CAAcC,WAA1B;MACA,OAAM,EAAC,GAAGJ,IAAJ;QACFK,IAAI,EAACR,QAAQ,CAACM,IAAT,CAAcE,IADjB;QAEFC,KAAK,EAAET,QAAQ,CAACM,IAAT,CAAcG,KAFnB;QAGFF,WAAW,EAAEP,QAAQ,CAACM,IAAT,CAAcC;MAHzB,CAAN;IAIH,CAPM,CAAP;IAQA,OAAOP,QAAQ,CAACM,IAAT,CAAcC,WAArB;EACH,CAdD;;EAgBA,OAAOV,OAAP;AACH,CArBD;;GAAMF,e;UACgBD,O;;;AAsBtB,eAAeC,eAAf"},"metadata":{},"sourceType":"module"}